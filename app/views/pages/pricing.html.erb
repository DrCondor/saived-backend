<%# Pricing Page %>
<section class="py-16 sm:py-24">
  <div class="max-w-6xl mx-auto px-4 sm:px-6">
    <div class="text-center mb-12">
      <p class="text-xs font-bold tracking-[0.2em] uppercase text-emerald-600 mb-3">Cennik</p>
      <h1 class="text-4xl sm:text-5xl font-bold text-neutral-900 mb-6">
        Prosty cennik, bez ukrytych kosztów
      </h1>
      <p class="text-lg text-neutral-600 max-w-2xl mx-auto">
        Jeden plan z pełnym dostępem do wszystkich funkcji.
        Zacznij od 14-dniowego trialu bez podawania karty.
      </p>
    </div>

    <%# Pricing Toggle %>
    <div class="flex items-center justify-center gap-4 mb-12" data-controller="pricing-toggle">
      <span class="text-sm font-medium" data-pricing-toggle-target="monthlyLabel">Miesięcznie</span>
      <button
        type="button"
        class="relative w-14 h-7 rounded-full bg-neutral-200 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2"
        data-action="click->pricing-toggle#toggle"
        data-pricing-toggle-target="toggleButton"
        aria-pressed="false"
      >
        <span class="absolute left-1 top-1 w-5 h-5 rounded-full bg-white shadow transition-transform duration-200" data-pricing-toggle-target="toggleDot"></span>
      </button>
      <span class="text-sm text-neutral-500" data-pricing-toggle-target="yearlyLabel">
        Rocznie <span class="text-emerald-600 font-semibold">(-15%)</span>
      </span>
    </div>

    <%# Main Pricing Card %>
    <div class="max-w-lg mx-auto mb-16">
      <div class="relative p-8 sm:p-10 rounded-3xl border-2 border-emerald-500 bg-white shadow-2xl">
        <%# Badge %>
        <div class="absolute -top-4 left-1/2 -translate-x-1/2">
          <span class="rounded-full bg-emerald-500 px-5 py-2 text-sm font-semibold text-white shadow-lg">
            Pełny dostęp
          </span>
        </div>

        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-neutral-900 mb-2">SAIVED Pro</h2>
          <p class="text-neutral-500">Wszystko czego potrzebujesz do zarządzania projektami</p>
        </div>

        <%# Price Display %>
        <div class="text-center mb-8" data-pricing-toggle-target="priceContainer">
          <div data-pricing-toggle-target="monthlyPrice">
            <span class="text-6xl font-bold text-neutral-900">39</span>
            <span class="text-2xl text-neutral-500"> zł</span>
            <p class="text-neutral-500 mt-1">/ miesiąc</p>
          </div>
          <div class="hidden" data-pricing-toggle-target="yearlyPrice">
            <span class="text-6xl font-bold text-neutral-900">349</span>
            <span class="text-2xl text-neutral-500"> zł</span>
            <p class="text-neutral-500 mt-1">/ rok <span class="text-emerald-600 font-medium">(~29 zł/mies)</span></p>
          </div>
        </div>

        <%# Features List %>
        <ul class="space-y-4 mb-8">
          <% [
            "Nielimitowane projekty",
            "Nielimitowane produkty",
            "Rozszerzenie Chrome",
            "Eksport PDF z własnym brandingiem",
            "Drag & drop, filtry, sortowanie",
            "Śledzenie cen (wkrótce)",
            "Moodboardy (wkrótce)",
            "Wsparcie priorytetowe"
          ].each do |feature| %>
            <li class="flex items-center gap-3">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-emerald-100 flex items-center justify-center">
                <svg class="w-4 h-4 text-emerald-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <span class="text-neutral-700"><%= feature %></span>
            </li>
          <% end %>
        </ul>

        <%# CTA Button %>
        <%= link_to about_path, class: "block w-full text-center rounded-full py-4 text-base font-semibold bg-neutral-900 text-white hover:bg-neutral-800 transition-all shadow-lg hover:shadow-xl" do %>
          Wypróbuj 14 dni za darmo
        <% end %>

        <p class="text-center text-sm text-neutral-500 mt-4">
          Bez karty kredytowej. Anuluj w dowolnym momencie.
        </p>
      </div>
    </div>

    <%# Trust Badges %>
    <div class="flex flex-wrap items-center justify-center gap-8 mb-20">
      <div class="flex items-center gap-2 text-neutral-500">
        <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
        </svg>
        <span class="text-sm">Bezpieczne płatności</span>
      </div>
      <div class="flex items-center gap-2 text-neutral-500">
        <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
        </svg>
        <span class="text-sm">Gwarancja satysfakcji</span>
      </div>
      <div class="flex items-center gap-2 text-neutral-500">
        <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
        </svg>
        <span class="text-sm">Wsparcie 24/7</span>
      </div>
    </div>

    <%# FAQ %>
    <div class="max-w-3xl mx-auto">
      <h2 class="text-2xl font-bold text-neutral-900 text-center mb-10">Częste pytania</h2>

      <div class="space-y-4">
        <% [
          {
            q: "Jak działa 14-dniowy trial?",
            a: "Przez 14 dni masz pełny dostęp do wszystkich funkcji SAIVED bez żadnych ograniczeń. Nie wymagamy karty kredytowej - po prostu załóż konto i zacznij korzystać. Jeżeli Ci się spodoba, wybierz plan i kontynuuj."
          },
          {
            q: "Co się stanie po zakończeniu trialu?",
            a: "Po zakończeniu 14-dniowego okresu próbnego Twoje konto zostanie zawieszone do momentu wyboru planu płatnego. Wszystkie Twoje dane zostaną zachowane - nic nie stracisz."
          },
          {
            q: "Czy mogę anulować subskrypcję?",
            a: "Oczywiście! Możesz anulować subskrypcję w dowolnym momencie z poziomu ustawień konta. Będziesz mieć dostęp do płatnych funkcji do końca opłaconego okresu rozliczeniowego."
          },
          {
            q: "Jakie metody płatności akceptujecie?",
            a: "Akceptujemy wszystkie główne karty kredytowe i debetowe (Visa, Mastercard) oraz przelewy bankowe. Płatności przetwarzamy przez bezpieczny system Stripe."
          },
          {
            q: "Czy oferujecie plan dla zespołów?",
            a: "Tak! Jeżeli potrzebujesz dostępu dla większego zespołu, skontaktuj się z nami - przygotujemy indywidualną ofertę dopasowaną do Waszych potrzeb."
          },
          {
            q: "Czy mogę zmienić z planu miesięcznego na roczny?",
            a: "Tak, możesz przejść na plan roczny w dowolnym momencie i skorzystać z 15% rabatu. Niewykorzystana część planu miesięcznego zostanie proporcjonalnie odliczona."
          }
        ].each do |faq| %>
          <details class="group rounded-2xl border border-neutral-200 bg-white overflow-hidden">
            <summary class="flex items-center justify-between p-5 cursor-pointer hover:bg-neutral-50 transition-colors">
              <span class="font-medium text-neutral-900 pr-4"><%= faq[:q] %></span>
              <svg class="w-5 h-5 text-neutral-400 transition-transform duration-200 group-open:rotate-180 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <div class="px-5 pb-5">
              <p class="text-neutral-600 leading-relaxed"><%= faq[:a] %></p>
            </div>
          </details>
        <% end %>
      </div>
    </div>
  </div>
</section>

<%# Team/Enterprise CTA %>
<section class="py-20 bg-neutral-900">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 text-center">
    <h2 class="text-3xl font-bold text-white mb-4">
      Potrzebujesz więcej?
    </h2>
    <p class="text-neutral-400 mb-8 max-w-2xl mx-auto">
      Dla większych zespołów i pracowni projektowych oferujemy indywidualne plany
      z dedykowanym wsparciem, szkoleniami i integracją z Waszymi systemami.
    </p>
    <%= link_to about_path, class: "inline-flex items-center gap-2 rounded-full bg-white px-6 py-3 text-sm font-medium text-neutral-900 hover:bg-neutral-100 transition-all" do %>
      Porozmawiajmy
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
      </svg>
    <% end %>
  </div>
</section>

<%# Stimulus controller for pricing toggle %>
<script>
  (() => {
    const application = Stimulus.Application.start()

    application.register("pricing-toggle", class extends Stimulus.Controller {
      static targets = ["toggleButton", "toggleDot", "monthlyLabel", "yearlyLabel", "monthlyPrice", "yearlyPrice"]

      connect() {
        this.isYearly = false
      }

      toggle() {
        this.isYearly = !this.isYearly

        // Update toggle visual
        this.toggleButtonTarget.setAttribute("aria-pressed", this.isYearly)
        this.toggleDotTarget.style.transform = this.isYearly ? "translateX(28px)" : "translateX(0)"
        this.toggleButtonTarget.classList.toggle("bg-emerald-500", this.isYearly)
        this.toggleButtonTarget.classList.toggle("bg-neutral-200", !this.isYearly)

        // Update labels
        this.monthlyLabelTarget.classList.toggle("text-neutral-900", !this.isYearly)
        this.monthlyLabelTarget.classList.toggle("text-neutral-500", this.isYearly)
        this.yearlyLabelTarget.classList.toggle("text-neutral-900", this.isYearly)
        this.yearlyLabelTarget.classList.toggle("text-neutral-500", !this.isYearly)

        // Update prices
        this.monthlyPriceTarget.classList.toggle("hidden", this.isYearly)
        this.yearlyPriceTarget.classList.toggle("hidden", !this.isYearly)
      }
    })
  })()
</script>
